<!-- MINIGAME: 8-bit password gate (remove whole block if you dislike it) -->
<style>
  #gate {
    position: fixed;
    inset: 0;
    display: grid;
    place-items: center;
    background: rgba(10, 0, 219, 0.0); /* transparente para ver la lluvia */
    pointer-events: none; /* no bloquea clicks si no quieres */
  }

  #gateBox {
    pointer-events: auto;
    user-select: none;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size: 14px;
    line-height: 1.2;
    color: #fff;
    text-align: center;
    padding: 14px 16px;
    border: 1px solid rgba(255,255,255,0.35);
    background: rgba(0,0,0,0.18);
    box-shadow: 0 0 0 2px rgba(255,255,255,0.06) inset;
    width: min(520px, calc(100vw - 32px));
  }

  #gateTitle {
    letter-spacing: 0.08em;
    margin-bottom: 10px;
    opacity: 0.95;
  }

  #gateHint {
    opacity: 0.75;
    margin-bottom: 10px;
  }

  #gateProgress {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 10px;
    align-items: center;
  }

  #gateWord {
    letter-spacing: 0.25em;
    padding: 10px 12px;
    border: 1px dashed rgba(255,255,255,0.35);
    background: rgba(0,0,0,0.16);
    overflow: hidden;
    white-space: nowrap;
  }

  #gateCount {
    opacity: 0.85;
    font-size: 12px;
  }

  #gateSmall {
    margin-top: 10px;
    font-size: 12px;
    opacity: 0.65;
  }

  /* mini parpadeo 8-bit */
  .blink {
    animation: blink 1s steps(1) infinite;
  }
  @keyframes blink {
    50% { opacity: 0; }
  }

  /* fade out al completar */
  .gateDone {
    animation: gateFade 380ms ease-out forwards;
  }
  @keyframes gateFade {
    to { opacity: 0; transform: scale(0.98); }
  }
</style>

<div id="gate" aria-hidden="true">
  <div id="gateBox">
    <div id="gateTitle">ACCESS LOCK</div>
    <div id="gateHint">Type the key to exit <span class="blink">_</span></div>

    <div id="gateProgress">
      <div id="gateWord">_ _ _ _ _ _ _ _</div>
      <div id="gateCount">0 / 8</div>
    </div>

    <div id="gateSmall">Enter: confirm, Backspace: undo, Esc: skip</div>
  </div>
</div>

<script>
  (function () {
    // Config
    const TARGET = "HYPERLUSH"; // cambia la palabra si quieres
    const HOME_URL = "index.html";

    const gate = document.getElementById("gate");
    const box = document.getElementById("gateBox");
    const wordEl = document.getElementById("gateWord");
    const countEl = document.getElementById("gateCount");

    let buffer = "";

    // si quieres que el overlay capture clicks/teclas siempre
    // (ahora mismo el overlay no bloquea click por pointer-events en #gate, pero el box sí)
    // puedes activar pointer-events en #gate si lo prefieres.

    function render() {
      const shown = [];
      for (let i = 0; i < TARGET.length; i++) {
        const c = buffer[i] ? buffer[i] : "_";
        shown.push(c);
      }
      wordEl.textContent = shown.join(" ");
      countEl.textContent = buffer.length + " / " + TARGET.length;
    }

    function done() {
      box.classList.add("gateDone");
      setTimeout(() => {
        window.location.href = HOME_URL;
      }, 360);
    }

    function resetIfWrongPrefix() {
      // si no coincide el prefijo, reset rápido (sensación arcade)
      if (TARGET.indexOf(buffer) !== 0) {
        buffer = "";
        render();
      }
    }

    // input
    window.addEventListener("keydown", (e) => {
      // Skip rápido
      if (e.key === "Escape") {
        window.location.href = HOME_URL;
        return;
      }

      if (e.key === "Backspace") {
        buffer = buffer.slice(0, -1);
        render();
        e.preventDefault();
        return;
      }

      if (e.key === "Enter") {
        if (buffer === TARGET) done();
        return;
      }

      // Acepta solo letras A-Z
      const k = e.key;
      if (k.length === 1) {
        const upper = k.toUpperCase();
        if (upper >= "A" && upper <= "Z") {
          if (buffer.length < TARGET.length) {
            buffer += upper;
            render();
            resetIfWrongPrefix();
            if (buffer === TARGET) done();
          }
          e.preventDefault();
        }
      }
    });

    render();
  })();
</script>
<!-- END MINIGAME -->

